<div class="endorsements-page">

  <!-- Header + volver -->
  <header class="page-header">
    <div>
      <h1>Endorsements</h1>
      <p>Módulo F3. Vista simple (solo UI por ahora).</p>
    </div>

    <button class="btn-secondary" (click)="volverDashboard()">
      ⟵ Volver al Panel
    </button>
  </header>

  <!-- Tabs -->
  <nav class="tabs">
    <button class="tab" [class.active]="activeTab==='recibidos'" (click)="cambiarTab('recibidos')">
      Recibidos <span class="pill">{{ recibidos.length }}</span>
    </button>

    <button class="tab" [class.active]="activeTab==='enviados'" (click)="cambiarTab('enviados')">
      Enviados <span class="pill">{{ enviados.length }}</span>
    </button>

    <button class="tab" [class.active]="activeTab==='crear'" (click)="cambiarTab('crear')">
      Crear Endorsement
    </button>
  </nav>

  <!-- RECIBIDOS -->
  <section *ngIf="activeTab==='recibidos'" class="list">
    <h2>Endorsements recibidos</h2>

    <div *ngFor="let e of recibidos" class="card">
      <div class="row">
        <strong>#{{ e.idEndorsement }}</strong>
        <span class="status" [class.pending]="e.status==='PENDING'"
                         [class.accepted]="e.status==='ACCEPTED'"
                         [class.rejected]="e.status==='REJECTED'">
          {{ e.status }}
        </span>
      </div>

      <p><b>Skill:</b> {{ e.skill }}</p>
      <p><b>Mensaje:</b> {{ e.message }}</p>
      <small *ngIf="e.fromUserId">De usuario: {{ e.fromUserId }}</small>

      <div class="actions" *ngIf="e.status==='PENDING'">
        <button class="btn-primary" (click)="decidirMock(e,true)">Aceptar</button>
        <button class="btn-danger" (click)="decidirMock(e,false)">Rechazar</button>
      </div>
    </div>

    <p *ngIf="recibidos.length===0" class="empty">No tenés endorsements recibidos.</p>
  </section>

  <!-- ENVIADOS -->
  <section *ngIf="activeTab==='enviados'" class="list">
    <h2>Endorsements enviados</h2>

    <div *ngFor="let e of enviados" class="card">
      <div class="row">
        <strong>#{{ e.idEndorsement }}</strong>
        <span class="status">{{ e.status }}</span>
      </div>

      <p><b>Skill:</b> {{ e.skill }}</p>
      <p><b>Mensaje:</b> {{ e.message }}</p>
      <small *ngIf="e.toUserId">Para usuario: {{ e.toUserId }}</small>
    </div>

    <p *ngIf="enviados.length===0" class="empty">No tenés endorsements enviados.</p>
  </section>

  <!-- CREAR -->
  <section *ngIf="activeTab==='crear'" class="create">
    <h2>Crear endorsement</h2>

    <form (ngSubmit)="enviarMock()" class="form">
      <label>
        ID receptor (toUserId)
        <input [(ngModel)]="form.toUserId" name="toUserId" required />
      </label>

      <label>
        Skill
        <input [(ngModel)]="form.skill" name="skill" required />
      </label>

      <label>
        Mensaje
        <textarea [(ngModel)]="form.message" name="message" rows="4" required></textarea>
      </label>

      <button class="btn-primary" type="submit">
        Enviar (mock)
      </button>
    </form>

    <p class="hint">
      Luego conectamos esto con la mutation <code>createEndorsement</code>.
    </p>
  </section>

</div>
