<!-- src/app/oportunidades/components/opportunity-form/opportunity-form.component.html -->

<div class="page-container">
  <header class="page-header">
    <button class="btn-ghost" (click)="goBack()">
      ‚Üê Volver
    </button>

    <div class="page-title-group">
      <h1>{{ editing ? 'Editar oportunidad' : 'Crear oportunidad' }}</h1>
      
      <!-- Estado actual si est√° editando -->
      <div *ngIf="editing && currentOpportunity" style="margin: 8px 0;">
        <span style="padding: 4px 12px; background: #e5e7eb; border-radius: 6px; font-size: 0.9rem; font-weight: 500;">
          Estado: <strong>{{ getEstadoLabel(currentOpportunity.estado) }}</strong>
        </span>
      </div>
      
      <p *ngIf="isEditable && editing">
        Puedes actualizar los campos de esta oportunidad.
      </p>
      <p *ngIf="isEditable && !editing">
        Completa los campos para crear una nueva oferta laboral.
      </p>
      <p *ngIf="!isEditable" style="color: #dc2626; font-weight: 500; margin-top: 8px;">
        üîí Esta oportunidad est√° CERRADA y no se puede modificar.
      </p>
    </div>

    <div class="header-actions">
      <button class="btn-secondary" (click)="cancelar()">{{ isEditable ? 'Cancelar' : 'Volver' }}</button>
      <button class="btn-primary" (click)="save()" *ngIf="isEditable">Guardar Cambios</button>
    </div>
  </header>

  <section class="card">
    <form [formGroup]="form" (ngSubmit)="save()" class="form-grid">
      <!-- Columna izquierda -->
      <div class="form-column">
        <div class="section-title">Datos generales</div>

        <div class="form-field">
          <label for="titulo">T√≠tulo *</label>
          <input
            id="titulo"
            type="text"
            class="input"
            formControlName="titulo"
            placeholder="Ej: Desarrollador Backend Junior"
          />
        </div>

        <div class="form-field">
          <label for="descripcion">Descripci√≥n *</label>
          <textarea
            id="descripcion"
            class="input textarea"
            formControlName="descripcion"
            rows="4"
            placeholder="Breve descripci√≥n de la posici√≥n..."
          ></textarea>
        </div>

        <div class="form-field">
          <label for="requisitos">Requisitos</label>
          <textarea
            id="requisitos"
            class="input textarea"
            formControlName="requisitos"
            rows="3"
            placeholder="Conocimientos, habilidades, experiencia previa..."
          ></textarea>
        </div>
      </div>

      <!-- Columna derecha -->
      <div class="form-column">
        <div class="section-title">Detalles de la oferta</div>

        <div class="form-field">
          <label for="ubicacion">Ubicaci√≥n *</label>
          <input
            id="ubicacion"
            type="text"
            class="input"
            formControlName="ubicacion"
            placeholder="Ej: Asunci√≥n, Paraguay"
          />
        </div>

        <div class="form-field">
          <label for="modalidad">Modalidad *</label>
          <select
            id="modalidad"
            class="input"
            formControlName="modalidad"
          >
            <option value="" disabled>Seleccione...</option>
            <option *ngFor="let m of modalidades" [value]="m.value">
              {{ m.label }}
            </option>
          </select>
        </div>

        <div class="form-field">
          <label for="tipo">Tipo *</label>
          <select id="tipo" class="input" formControlName="tipo">
            <option value="" disabled>Seleccione...</option>
            <option *ngFor="let t of tipos" [value]="t.value">
              {{ t.label }}
            </option>
          </select>
        </div>

        <div class="form-field">
          <label for="fechaCierre">Fecha de cierre *</label>
          <input
            id="fechaCierre"
            type="date"
            class="input"
            formControlName="fechaCierre"
          />
        </div>

        <div class="form-field">
          <label for="etiquetas">Etiquetas (separadas por coma)</label>
          <input
            id="etiquetas"
            type="text"
            class="input"
            formControlName="etiquetas"
            placeholder="Ej: Java, Spring, Full Remote"
          />
        </div>
      </div>
    </form>
  </section>
</div>
